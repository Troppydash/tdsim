<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Constraint Solver</title>
</head>
<body>

<div>
    <canvas id="root"></canvas>
</div>

<script type="module">

    import {TDCanvas} from "../../build/tdsim/canvas/canvas.js";
    import {Loader} from "../../build/tdsim/canvas/loader.js";
    import {Systems} from "../../build/tdsim/sims/objects/system.js";
    import {DynamicGraphs} from "../../build/tdsim/sims/algos/graphing.js";

    const canvas = new TDCanvas(
        document.getElementById('root'),
        {
            attachments: {
                axis: true,
                labels: false,
                counter: true,
            },
            rate: {
                update: 360,
            },
            region: {
                right: 0.9,
                top: 0.9
            }
        }
    );

    const loader = new Loader();
    loader.inject(canvas, cvs => {
        // const pendulum = new Systems.ConstraintPendulum({
        //     mass: 0.1,
        //     length: 4,
        //     angle: -60 / 180 * Math.PI,
        //     gravity: 9.81
        // });



        // cvs.addElement(pendulum);

        const dpend = new Systems.DoublePendulum();

        const grapher = new DynamicGraphs.EnergeticSystemGrapher(
            dpend,
            ['totalError', 'totalDError', 'totalEnergy'],
            ['#ff0000', '#0000ff', '#00ff00'],
            {
                location: [0, 0],
                size:  [13, 8],
                bindings: {
                    xrange: [0, 4],
                    yrange: [-14, 100],
                    bordered: true,
                    axis: true
                }
            }
        )

        cvs.addElement(grapher);
        cvs.addElement(dpend);
    });
</script>
</body>
</html>